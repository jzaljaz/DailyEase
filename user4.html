<!DOCTYPE html>
<html>
<head>
  <title>User Dashboard</title>
  <style>
    :root {
      --bg: #fffde7;
      --card: #fff9c4;
      --text: #212121;
      --button: #388e3c;
      --header-bg: #1976d2;
      --header-text: #ffffff;
    }

    body.dark {
      --bg: #121212;
      --card: #1e1e1e;
      --text: #f1f1f1;
      --button: #64dd17;
      --header-bg: #0d47a1;
      --header-text: #ffffff;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: var(--bg);
      margin: 0;
      padding: 0;
      transition: background 0.4s ease;
    }

    header {
      background: var(--header-bg);
      padding: 1.8rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    header h2 {
      font-size: 2.5rem;
      color: var(--header-text);
      margin: 0;
    }

    .toggle-btn {
      background: #ffffff;
      color: #000000;
      border: none;
      padding: 1rem 1.5rem;
      border-radius: 40px;
      font-size: 1.3rem;
      cursor: pointer;
      font-weight: bold;
    }

    main {
      padding: 2rem;
      max-width: 700px;
      margin: auto;
    }

    .start-btn {
      display: block;
      margin: 1rem auto 2rem auto;
      padding: 1rem 2rem;
      font-size: 1.2rem;
      font-weight: bold;
      background-color: #43a047;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    .task {
      background: var(--card);
      padding: 1.2rem;
      margin: 1rem 0;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      transition: background 0.3s ease, transform 0.3s ease;
      flex-wrap: wrap;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      position: relative;
    }

    .reminder {
      animation: grow-glow 1s infinite alternate ease-in-out, redPulse 1s infinite ease-in-out;
      border: 3px solid #ff1744;
    }

    @keyframes redPulse {
      0% { box-shadow: 0 0 0px 0px rgba(255, 23, 68, 0.7); }
      50% { box-shadow: 0 0 20px 10px rgba(255, 23, 68, 0.5); }
      100% { box-shadow: 0 0 0px 0px rgba(255, 23, 68, 0.7); }
    }

    @keyframes grow-glow {
      0% { transform: scale(1); background-color: var(--card); }
      100% { transform: scale(1.1); background-color: #ffcdd2; }
    }

    .task-left {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex: 1;
    }

    .task img {
      width: 60px;
      height: 60px;
      cursor: pointer;
    }

    .task-text {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .task-text span {
      font-size: 1.6rem;
      color: var(--text);
      font-weight: bold;
      cursor: pointer;
    }

    .time-label {
      font-size: 1rem;
      color: #c62828;
      font-weight: bold;
    }

    .task button {
      padding: 0.8rem 1.2rem;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      background: var(--button);
      color: white;
      cursor: pointer;
    }

    .task button.done {
      background: #9e9e9e;
    }

    @media screen and (max-width: 600px) {
      .task {
        flex-direction: column;
        align-items: flex-start;
      }
      .task button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <header>
    <h2>üß† My Daily Routine</h2>
    <button class="toggle-btn" onclick="toggleDarkMode()">üåô Dark Mode</button>
  </header>
  <main>
    <button class="start-btn" onclick="startApp()">‚ñ∂Ô∏è Start Reminders</button>
    <div id="taskList"></div>
  </main>

  <script>
    const tasks = [
      { title: 'Brush your teeth', image: 'https://img.icons8.com/color/96/toothbrush.png', time: '08:00', done: false },
      { title: 'Take your medication', image: 'https://img.icons8.com/color/96/pill.png', time: '09:00', done: false },
      { title: 'Eat your breakfast', image: 'https://img.icons8.com/color/96/breakfast.png', time: '12:15', done: false },
      { title: 'Go for a walk', image: 'https://img.icons8.com/color/96/walking.png', time: '15:46', done: false },
      { title: 'Watch TV', image: 'https://img.icons8.com/color/96/tv.png', time: '20:00', done: false }
    ];

    let speakingInterval = null;

    function speak(text) {
      if ('speechSynthesis' in window) {
        speechSynthesis.cancel(); // Cancel any ongoing speech
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'en-US';
        speechSynthesis.speak(utterance);
      }
    }

    function getCurrentTime() {
      const now = new Date();
      return now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
    }

    function isDue(time) {
      return getCurrentTime() === time;
    }

    function checkAndSpeakTasks() {
      const currentTime = getCurrentTime();
      tasks.forEach(task => {
        if (task.time === currentTime && !task.done) {
          if (!speechSynthesis.speaking) {
            speak(`Please ${task.title}`);
          }
        }
      });
      render();
    }

    function startSpeakingInterval() {
      if (!speakingInterval) {
        speakingInterval = setInterval(checkAndSpeakTasks, 1000);
      }
    }

    function startApp() {
      render();
      startSpeakingInterval();
    }

    function render() {
      const container = document.getElementById('taskList');
      container.innerHTML = '';
      const current = getCurrentTime();

      tasks.forEach((task, i) => {
        const isTaskDue = (task.time === current && !task.done);
        const taskDiv = document.createElement('div');
        taskDiv.className = 'task' + (isTaskDue ? ' reminder' : '');

        taskDiv.innerHTML = `
          <div class="task-left">
            <img src="${task.image}" alt="${task.title}" onclick="speak('Please ${task.title}')" />
            <div class="task-text">
              <span onclick="speak('Please ${task.title}')">${task.title}</span>
              <div class="time-label">üïí ${task.time}</div>
            </div>
          </div>
          <button class="${task.done ? 'done' : ''}" onclick="toggle(${i})">
            ${task.done ? '‚úÖ Done' : '‚úîÔ∏è Mark Done'}
          </button>
        `;

        container.appendChild(taskDiv);
      });
    }

    function toggle(index) {
      tasks[index].done = !tasks[index].done;
      speechSynthesis.cancel(); // Stop speech when marked done
      render();
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark');
    }
  </script>
</body>
</html>
